\title{Lab: Malicious Software}
\subtitle{A lab for reflection on trust and reproducible binaries}

\author{%
  Daniel Bosk
}
\institute{%
  Department of Information and Communication Systems\\
  Mid Sweden University, SE-851\,70 Sundsvall
}

\maketitle


\section{Introduction}
\label{sec:intro}
This laboratory work will cover the topic of malicious software, or malware.
Malware comes in many different forms: viruses which infect other programs, 
worms which actively spread themselves through networks, logic bombs which does 
nothing until a given criteria is fulfilled.
The reason for creating malware differs.
In the early days, the main reason was out of curiosity, as was the case of the 
Morris Worm.
Nowadays, the reason ranges from economic gain through ransomware to state 
sponsored attacks on foreign infrastructure.

To counter these we can use several approaches.
One is antivirus software, which tries to detect all sorts of malware---not 
just viruses---despite the name.
Another approach is to configure access control and other mechanisms to prevent 
running these programs, e.g.~by never executing programs on USB-sticks, 
programs received by email, or programs downloaded from the Web, and so on.
However, as the adversarial power grows, the sophistication of the malware 
growns with it.
As such, the protection mechanisms might not always be obvious.

\subsection{Aim}
\label{sec:aim}
The aim of this assignment is for you to reflect on trust in source code and 
binaries.
More specifically, the intended learning outcome is that you will:
\begin{itemize}
    \input{aims.tex}
\end{itemize}

The next section covers what you must read before you understand this 
assignment and how to do the work.
Section \ref{sec:tasks} covers the work to be done, i.e.~how you should learn 
this.
Section \ref{sec:exam} covers how it will be examined, i.e.~how you show that 
you have fulfilled the intended learning outcomes given above.


\section{Theory}
\label{sec:reading}
\input{literature.tex}


\section{Assignment}
\label{sec:tasks}
The first part of this assignment consists of implementing Thompson's idea for 
including malicious code in the C compiler and then removing it from the source 
code.
The C compiler should be modified so that it injects a printf-statement 
printing the line ``May the Source be with you ...\textbackslash n'' in the 
beginning of all programs it compiles.
This means that after the compiler itself is recompiled it will also be 
printing this line when compiling programs.

The second part of the assignment is to add a compiler specific injection which 
injects the printf-injecting code above.
Once we have recompiled the compiler with this code, then we can restore the 
original source code and the compiler will continue to do this despite 
recompiling it with its original source code.

This first and second part of the assignment will be solved together during 
a full-class hackathon in the computer lab.
There will be a projector with the code for all to see, then we will rotate who 
will be by the keyboard writing what the rest of the class is saying.
This way we will discuss together and write the code together, everyone will 
thus participate in the process.

The last part of the assignment is to dicsuss the consequences of this, among 
other things we will discuss the following two questions:
\begin{itemize}
  \item How can we possibly detect if this attack has occured somewhere?
  \item What if a powerful adversary would mount this attack against e.g.~the 
    GNU C Compiler's main repository?
  \item How can we prevent this from happening?
\end{itemize}


\section{Examination}
\label{sec:exam}
To pass this assignment you must first actively participate in the hackathon 
lab session.
You must also actively contribute to the post-coding discussions.

If you cannot participate in the lab session you have to solve the lab 
yourself, then orally present your solution during one of the lab sessions 
after the course-end.


\subsubsection*{Acknowledgements}

This work is licensed under the Creative Commons Attribution-ShareAlike 3.0 
Unported license.
To view a copy of this license, visit 
\url{http://creativecommons.org/licenses/by-sa/3.0/}.
You can find its original source code in URL 
\url{https://github.com/dbosk/malwarelab/}.


\printbibliography
